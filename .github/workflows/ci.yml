name: Ansible CI
on:
  push:
  pull_request:

jobs:
  build-ubuntu:
    runs-on: 'ubuntu-22.04'
    steps:
    - uses: actions/checkout@v2
    - name: Run Ansible Playbook
      env:
        CI: 1
      run: |
        ansible-playbook main.yml -b --skip-tags brew

  build-macos:
    runs-on: 'macos-12'
    steps:
    - uses: actions/checkout@v2
    - name: Install Ansible
      run: |
        brew install ansible
    - name: Run Ansible Playbook
      run: |
        ansible-playbook main.yml --skip-tags brew

